<p align="center">
    <img src="https://i.imgur.com/NKsYBcg.png" width=700>
</p>



## üìù –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ
- [üìå –û–ø–∏—Å–∞–Ω–∏–µ —Ä–∞–±–æ—Ç—ã](#Target)
- [‚≠ê –ú–Ω–æ–∂–µ—Å—Ç–≤–æ –ú–∞–Ω–¥–µ–ª—å–±—Ä–æ—Ç–∞](#Mandelbrot)
- [üíª –û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã](#Equipment)
- [üöÄ –•–æ–¥ —Ä–∞–±–æ—Ç—ã](#Progress)
    - [–ü–æ–¥—Å—á—ë—Ç —Ç–æ—á–µ–∫](#DotsCalculation)
    - [–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–∞–∫—Ä–æ—Å–æ–≤](#MacrosUsage)
    - [–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ](#Testing)
    - [–ë–µ–∑ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ñ–ª–∞–≥–∞–º–∏](#StandardOptimization)
    - [–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å –ø–æ–º–æ—â—å—é –º–∞—Å—Å–∏–≤–æ–≤](#ArrayOptimization)
    - [–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –ø–æ–º–æ—â–∏ intrinsics (AVX)](#AVXOptimization)
- [üìà –ò—Ç–æ–≥–∏](#Results)



<a name="Target"></a>

## üìå –û–ø–∏—Å–∞–Ω–∏–µ —Ä–∞–±–æ—Ç—ã
–Ø –Ω–∞–ø–∏—Å–∞–ª –ø—Ä–æ–≥—Ä–∞–º–º—É –Ω–∞ —è–∑—ã–∫–µ C++ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ SFML, —Å –ø–æ–º–æ—â—å—é –∫–æ—Ç–æ—Ä–æ–π –º–æ–∂–Ω–æ –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å —É–¥–∏–≤–∏—Ç–µ–ª—å–Ω—É—é –∫—Ä–∞—Å–æ—Ç—É –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –ú–∞–Ω–¥–µ–ª—å–±—Ä–æ—Ç–∞, –æ–¥–Ω–∞–∫–æ –±–µ–∑ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –æ–Ω–æ –Ω–∞—á–∏–Ω–∞–µ—Ç –ø—Ä–∏—Ç–æ—Ä–º–∞–∂–∏–≤–∞—Ç—å —É–∂–µ —Å —Å–∞–º–æ–≥–æ –∑–∞–ø—É—Å–∫–∞. –í –∫–æ–Ω—Å–æ–ª—å –ø–µ—á–∞—Ç–∞–µ—Ç—Å—è FPS (Frames Per Second - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–¥—Å—á–∏—Ç—ã–≤–∞–µ–º—ã—Ö –∑–∞ –æ–¥–Ω—É —Å–µ–∫—É–Ω–¥—É –∫–∞–¥—Ä–æ–≤ –±–µ–∑ —É—á–µ—Ç–∞ –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç—Ä–∏—Å–æ–≤–∫–∏) –ø–æ—Å–ª–µ –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ –∫–∞–∂–¥–æ–≥–æ –∫–∞–¥—Ä–∞.

–ö–ª–∞–≤–∏—à–∏ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ–∫–Ω–æ–º:
| –ö–ª–∞–≤–∏—à–∞       | –î–µ–π—Å—Ç–≤–∏–µ              |
| :-----------: | :-------------------: |
| $\uparrow$    | –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å—Å—è –Ω–∞–≤–µ—Ä—Ö  |
| $\downarrow$  | –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å—Å—è –≤–Ω–∏–∑    |
| $\rightarrow$ | –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å—Å—è –≤–ø—Ä–∞–≤–æ  |
| $\leftarrow$  | –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å—Å—è –≤–ª–µ–≤–æ   |
| $+$ –∏–ª–∏ $=$   | –£–≤–µ–ª–∏—á–∏—Ç—å –º–∞—Å—à—Ç–∞–±     |
| $-$           | –£–º–µ–Ω—å—à–∏—Ç—å –º–∞—Å—à—Ç–∞–±     |


<ins>**–¶–µ–ª—å —Ä–∞–±–æ—Ç—ã**</ins> - –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø–æ–¥—Å—á—ë—Ç–∞ —Ç–æ—á–µ–∫ –¥–ª—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –ú–∞–Ω–¥–µ–ª—å–±—Ä–æ—Ç–∞, —Å—Ä–µ–¥–∏ –∫–æ—Ç–æ—Ä—ã—Ö:
1) –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ñ–ª–∞–≥–∞–º–∏ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞ (-O0, -O1, -O2, -O3, -Ofast)
2) –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å –ø–æ–º–æ—â—å—é –º–∞—Å—Å–∏–≤–æ–≤ (—Å—á–∏—Ç–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ç–æ—á–µ–∫ –∑–∞ —Ä–∞–∑, —É–º–µ–Ω—å—à–∞—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏—Ç–µ—Ä–∞—Ü–∏–π)
3) –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å –ø–æ–º–æ—â—å—é intrinsics (AVX)



<a name="Mandelbrot"></a>

## ‚≠ê –ú–Ω–æ–∂–µ—Å—Ç–≤–æ –ú–∞–Ω–¥–µ–ª—å–±—Ä–æ—Ç–∞
–ó–∞–¥–∞–¥–∏–º –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å $z_n = z_{n-1}^2 + z_0$ –¥–ª—è $n \ge 2$, $z_0$ - —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–æ. –ú–Ω–æ–∂–µ—Å—Ç–≤–æ –ú–∞–Ω–¥–µ–ª—å–±—Ä–æ—Ç–∞ - –º–Ω–æ–∂–µ—Å—Ç–≤–æ —Ç–∞–∫–∏—Ö —Ç–æ—á–µ–∫ $z_0$ –Ω–∞ –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–π –ø–ª–æ—Å–∫–æ—Å—Ç–∏, —á—Ç–æ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å $z_n$ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∞.

–≠—Ç—É —Ä–µ–∫—É—Ä—Ä–µ–Ω—Ç—É –Ω–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞–º —É–ø—Ä–æ—Å—Ç–∏—Ç—å –Ω–µ —É–¥–∞–ª–æ—Å—å, –æ–¥–Ω–∞–∫–æ –º–æ–∂–Ω–æ –ø–æ–ø—ã—Ç–∞—Ç—å—Å—è —É—Å–∫–æ—Ä–∏—Ç—å –ø–æ–¥—Å—á—ë—Ç –ø—Ä–∏ –ø–æ–º–æ—â–∏ –∞–ø–ø–∞—Ä–∞—Ç–Ω—ã—Ö –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π.

–ü—É—Å—Ç—å $z_n = x_n + i*y_n$, —Ç–æ–≥–¥–∞ \
$x_{n+1} = x_n^2 - y_n^2 + x_0$ \
$y_{n+1} = 2x_ny_n + x_0$

–ë—É–¥–µ–º —Å—á–∏—Ç–∞—Ç—å, —á—Ç–æ —Ç–æ—á–∫–∞ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç –º–Ω–æ–∂–µ—Å—Ç–≤—É –ú–∞–Ω–¥–µ–ª—å–±—Ä–æ—Ç–∞, –µ—Å–ª–∏ —Å–ø—É—Å—Ç—è MAX_DOT_TRIES = 256 –∏—Ç–µ—Ä–∞—Ü–∏–π, –æ–Ω–∞ –≤—Å—ë –µ—â—ë –æ—Å—Ç–∞–ª–∞—Å—å –≤ –æ–∫—Ä—É–∂–Ω–æ—Å—Ç–∏ —Ä–∞–¥–∏—É—Å–æ–º 2 –æ—Ç –Ω–∞—á–∞–ª–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç. –î–æ–∫–∞–∑–∞–Ω–æ, —á—Ç–æ –µ—Å–ª–∏ $|z_n| > 2$ –¥–ª—è –Ω–µ–∫–æ—Ç–æ—Ä–æ–≥–æ $n$, —Ç–æ $|z_n| \rightarrow \inf$

<p align="center">
    <img src="https://i.imgur.com/4AhvyeH.png" width=200>
    <img src="https://i.imgur.com/rNqewnP.png" width=200>
    <img src="https://i.imgur.com/70EQteb.png" width=200>
</p>



<a name="Equipment"></a>

## üíª –û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
–†–∞–±–æ—Ç–∞ –ø—Ä–æ–≤–æ–¥–∏–ª–∞—Å—å –Ω–∞ –Ω–æ—É—Ç–±—É–∫–µ, –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω–æ–º –∫ —ç–ª–µ–∫—Ç—Ä–æ—Å–µ—Ç–∏. \
–ü—Ä–æ—Ü–µ—Å—Å–æ—Ä: Intel Core I5-13420H \
–û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞: Arch Linux (—è–¥—Ä–æ: Linux 6.13.8-arch1-1)

–ì—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä (GPU) –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è \
–ú–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞—Å—å, –Ω–∞–≥—Ä—É–∂–∞–ª–æ—Å—å –æ–¥–Ω–æ —è–¥—Ä–æ, –Ω–æ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –û–° –ø–µ—Ä–µ–∫–ª—é—á–∞–ª–∞ –∑–∞–¥–∞—á—É —Å –æ–¥–Ω–æ–≥–æ —è–¥—Ä–∞ –Ω–∞ –¥—Ä—É–≥–æ–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.



<a name="Progress"></a>

## üöÄ –•–æ–¥ —Ä–∞–±–æ—Ç—ã


<a name="DotsCalculation"></a>

### –ü–æ–¥—Å—á—ë—Ç —Ç–æ—á–µ–∫
–¢–æ—á–∫–∏ –±—É–¥–µ–º —Å—á–∏—Ç–∞—Ç—å —Ç–∞–∫: —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞–µ–º –∫–∞–∂–¥—ã–π –ø–∏–∫—Å–µ–ª—å –Ω–∞ —ç–∫—Ä–∞–Ω–µ –ø–æ –æ—Ç–¥–µ–ª—å–Ω–æ—Å—Ç–∏, –ø–µ—Ä–µ–≤–æ–¥–∏–º –µ–≥–æ –≤ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –¥–µ–π—Å—Ç–≤—É—é—â–µ–π –Ω–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç —Å–∏—Å—Ç–µ–º—ã –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç:
```cpp
for (unsigned int y = 0; y < data->window_width; ++y)
{
    float y0 = (float) y / data->window_width * data->zoom + data->y_shift;
    for (unsigned int x = 0; x < data->window_height; ++x)
    {
        float x0 = (float) x / data->window_height * data->zoom + data->x_shift
        ...
    }
}
```


<a name="MacrosUsage"></a>

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–∞–∫—Ä–æ—Å–æ–≤

```cpp
#define CALC_AND_ADD_CODE(__code_for_saving_colors__)                                   \
    for (unsigned int y = 0; y < data->window_width; ++y)                               \
    {                                                                                   \
        ...                                                                             \
        for (unsigned int x = 0; x < data->window_height; ++x)                          \
        {                                                                               \
            ...                                                                         \
            __code_for_saving_colors__                                                  \
        }                                                                               \
    }


void CalcMandelbrotWithColors(MandelbrotInfo* data)
{
    CALC_AND_ADD_CODE({*(data->arr_iters + y*data->window_width + x) = n;})
}


void CalcMandelbrotNoColors(volatile MandelbrotInfo* data)
{
    CALC_AND_ADD_CODE({})
}
```

–ö–∞–∫ –º–æ–∂–Ω–æ –∑–∞–º–µ—Ç–∏—Ç—å, —è —Ä–µ—à–∏–ª –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–æ–≤–æ–ª—å–Ω–æ –±–æ–ª—å—à–æ–π –º–∞–∫—Ä–æ—Å –≤ —Å–≤–æ—ë–º –∫–æ–¥–µ.

#### –ó–∞—á–µ–º –∏ –ø–æ—á–µ–º—É —è —Ç–∞–∫ —Å–¥–µ–ª–∞–ª?

–Ø —Ö–æ—Ç–µ–ª –±—ã –∏–º–µ—Ç—å –≤ –±–∏–Ω–∞—Ä–Ω–æ–º —Ñ–∞–π–ª–µ —Å—Ä–∞–∑—É –¥–≤–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ - –ø—Ä–æ–≤–æ–¥–∏—Ç—å —Ç–µ—Å—Ç—ã (–∑–∞–ø—É—Å–∫ —Å —Ñ–ª–∞–≥–æ–º "--tests=<tests_number>") –∏ –∑–∞–ø—É—Å–∫–∞—Ç—å –æ–∫–Ω–æ –¥–ª—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –ú–∞–Ω–¥–µ–ª—å–±—Ä–æ—Ç–∞ (–∑–∞–ø—É—Å–∫ —Å —Ñ–ª–∞–≥–æ–º "--draw"). –ò –ø—Ä–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –Ω–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∑–∞–ø–æ–º–∏–Ω–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏—Ç–µ—Ä–∞—Ü–∏–π, –ø—Ä–æ–≤–µ–¥—ë–Ω–Ω—ã—Ö –ø—Ä–∏ –ø–æ–¥—Å—á—ë—Ç–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Ç–æ—á–∫–∏, –≤–µ–¥—å –¥–∞–ª–µ–µ —ç—Ç–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –Ω–∏–∫–∞–∫ –Ω–µ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∞. –ê –≤–æ—Ç –ø—Ä–∏ –æ—Ç—Ä–∏—Å–æ–≤–∫–µ —Ç–æ—á–µ–∫ –≤ –æ–∫–Ω–µ —ç—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ.

#### –ö–∞–∫–∏–µ –µ—Å—Ç—å –≤–∞—Ä–∏–∞–Ω—Ç—ã —Ä–µ—à–µ–Ω–∏—è —ç—Ç–æ–π –ø—Ä–æ–±–ª–µ–º—ã?

**–ü–µ—Ä–≤—ã–π –∞–ª—å—Ç–µ—Ä–Ω—ã—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–±:** \
–ú–æ–∂–Ω–æ –±—ã–ª–æ –±—ã —Å–¥–µ–ª–∞—Ç—å –æ–¥–Ω—É —Ñ—É–Ω–∫—Ü–∏—é —Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º –∏ –Ω–∞ –∫–∞–∂–¥–æ–π –∏—Ç–µ—Ä–∞—Ü–∏–∏ —Ü–∏–∫–ª–∞ –ø—Ä–æ–≤–µ—Ä—è—Ç—å —ç—Ç–æ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä:

```cpp
void CalcMandelbrotWithColors(MandelbrotInfo* data, int need_to_save_iters)
{
    for (unsigned int y = 0; y < data->window_width; ++y)
    {
        ...
        for (unsigned int x = 0; x < data->window_height; ++x)
        {
            ...
            if (need_to_save_iters)
                *(data->arr_iters + y*data->window_width + x) = n;
        }
    }
}
```
–û–¥–Ω–∞–∫–æ —ç—Ç–æ –Ω–µ–º–Ω–æ–≥–æ –∏—Å–∫–∞–∂–∞–µ—Ç –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ–µ –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã –∫–æ–¥–∞, –≤–µ–¥—å –¥–∞–Ω–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –Ω–∞ –∫–∞–∂–¥–æ–π –∏—Ç–µ—Ä–∞—Ü–∏–∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ —Ü–∏–∫–ª–∞.

**–í—Ç–æ—Ä–æ–π –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–±:** \
–ï—â—ë –º–æ–∂–Ω–æ, —á—Ç–æ–±—ã —Ñ—É–Ω–∫—Ü–∏—è –ø–æ–¥—Å—á—ë—Ç–∞ –ø—Ä–∏–Ω–∏–º–∞–ª–∞ —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ —Ñ—É–Ω–∫—Ü–∏—é, –≤ –∫–æ—Ç–æ—Ä–æ–π —É–∂–µ –±—É–¥–µ—Ç –∏–ª–∏ –Ω–µ –±—É–¥–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—å—Å—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö:

```cpp
void CalcMandelbrot(MandelbrotInfo* data, void (*FuncToSaveIters)(MandelbrotInfo* data, int n))
{
    for (unsigned int y = 0; y < data->window_width; ++y)
    {
        ...
        for (unsigned int x = 0; x < data->window_height; ++x)
        {
            ...
            FuncToSaveIters()
        }
    }
}


void SaveColor(MandelbrotInfo* data, int n)
{
    *(data->arr_iters + y*data->window_width + x) = n;
}


void DontSaveColor(MandelbrotInfo* data, int n) {}
```

–í—ã–∑–æ–≤ CalcMandelbrot –±—É–¥–µ—Ç —Ç–∞–∫–∏–º:

```cpp
CalcMandelbrot(data, SaveColor)     // –ü—Ä–∏ –æ—Ç—Ä–∏—Å–æ–≤–∫–µ
CalcMandelbrot(data, DontSaveColor) // –í —Ç–µ—Å—Ç–∞—Ö
```

–û–¥–Ω–∞–∫–æ –∏ —Ç—É—Ç –µ—Å—Ç—å –æ—á–µ–≤–∏–¥–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞ –≤ —Å–ª–∏—à–∫–æ–º —á–∞—Å—Ç–æ–º –≤—ã–∑–æ–≤–µ –æ–¥–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏, –≤–µ–¥—å —ç—Ç–æ —Ç–æ–∂–µ –±—É–¥–µ—Ç –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å –Ω–∞ –∫–∞–∂–¥–æ–π –∏—Ç–µ—Ä–∞—Ü–∏–∏.

#### –í—ã–≤–æ–¥
–ò—Å—Ö–æ–¥—è –∏–∑ –≤—Å–µ–≥–æ –≤—ã—à–µ —Å–∫–∞–∑–∞–Ω–Ω–æ–≥–æ, —è –ø—Ä–∏–Ω—è–ª –Ω–µ –æ—á–µ–Ω—å –∏–∑—è—â–Ω–æ–µ, –∑–∞—Ç–æ, –∫–∞–∫ –º–Ω–µ –∫–∞–∂–µ—Ç—Å—è, –Ω–∞–∏–±–æ–ª–µ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–∞–Ω–Ω–æ–π –ø—Ä–æ–±–ª–µ–º—ã –≤ –≤–∏–¥–µ —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –≤—ã—à–µ –º–∞–∫—Ä–æ—Å–∞ –º–∞–∫—Ä–æ—Å–∞.


<a name="Testing"></a>

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ª—é–±—ã–º –æ–±—Ä–∞–∑–æ–º –¥–æ–±–∏—Ç—å—Å—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–π —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞, —á—Ç–æ–±—ã –≤–æ –≤—Ä–µ–º—è —Ç–µ—Å—Ç–æ–≤ –æ–Ω–∞ –Ω–µ –∏–∑–º–µ–Ω—è–ª–∞—Å—å. –ï—Å–ª–∏ —ç—Ç–æ–≥–æ –Ω–µ —Å–¥–µ–ª–∞—Ç—å, —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å –±–æ–ª—å—à–æ–π –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å—é –ø–æ–ª—É—á–∞—Ç—Å—è –Ω–µ—Ç–æ—á–Ω—ã–µ, —Ç–∞–∫ –∫–∞–∫ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ —Å–∏–ª—å–Ω–æ –≤–ª–∏—è–µ—Ç –Ω–∞ —Ç—Ä–æ—Ç—Ç–ª–∏–Ω–≥ –∏ —Å–∫–æ—Ä–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞.

–ü–æ–ª—É—á–µ–Ω–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –ø–µ—Ä–µ–¥ –ø–æ–¥—Å—á—ë—Ç–æ–º —Å—Ä–µ–¥–Ω–µ–≥–æ. –Ø —Ä–µ—à–∏–ª –æ—Ç–±—Ä–∞—Å—ã–≤–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è, –æ—Ç–ª–∏—á–∞—é—â–∏–µ—Å—è –æ—Ç —Å—Ä–µ–¥–Ω–µ–≥–æ –∞—Ä–∏—Ñ–º–µ—Ç–∏—á—Å–∫–æ–≥–æ –±–æ–ª–µ–µ, —á–µ–º –Ω–∞ —Å—Ä–µ–¥–Ω–µ–∫–≤–∞–¥—Ä–∞—Ç–∏—á–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ, —É–º–Ω–æ–∂–µ–Ω–Ω–æ–µ –Ω–∞ 3:
```python
filter(lambda x: x - average <= deviation * 3, test_results)
```
–ü–æ —ç—Ç–∏–º —á–∏—Å–ª–∞–º –≤–Ω–æ–≤—å —Å—á–∏—Ç–∞–µ—Ç—Å—è —Å—Ä–µ–¥–Ω–µ–µ –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–æ–µ –∏ —Å—Ä–µ–¥–Ω–µ–∫–≤–∞–¥—Ä–∞—Ç–∏—á–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ, –∞ —Ç–∞–∫–∂–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –æ—à–∏–±–∫–∞ —Å—Ä–µ–¥–Ω–µ–≥–æ –∏ –ø–æ–≥—Ä–µ—à–Ω–æ—Å—Ç—å.


<a name="StandardOptimization"></a>

### –ë–µ–∑ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ñ–ª–∞–≥–∞–º–∏

–ó–¥–µ—Å—å –∫–∞–∂–¥–∞—è —Ç–æ—á–∫–∞ —Å—á–∏—Ç–∞–µ—Ç—Å—è –ø–æ –æ—Ç–¥–µ–ª—å–Ω–æ—Å—Ç–∏

–ö–æ–¥ –ø–æ–¥—Å—á—ë—Ç–∞ –æ–¥–Ω–æ–π —Ç–æ—á–∫–∏:

```cpp
float x1 = x0;
float y1 = y0;

int n = 0;
for (; n < MAX_DOT_TRIES; ++n)      // MAX_DOT_TRIES —Å–º. –≤ —Ä–∞–∑–¥–µ–ª–µ "–ú–Ω–æ–∂–µ—Å—Ç–≤–æ –ú–∞–Ω–¥–µ–ª—å–±—Ä–æ—Ç–∞"
{
    float x1_quad = x1*x1;
    float y1_quad = y1*y1;
    float x1_y1   = x1*y1;

    if (x1_quad + y1_quad >= MAX_DISTANCE_QUAD)
        break;

    x1 = x1_quad - y1_quad + x0;
    y1 = 2*x1_y1 + y0;
}
```

–ü–æ–ª—É—á–µ–Ω–Ω—ã–µ –º–Ω–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:

```
–ë–µ–∑ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ [-O0]:
–°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (–≤ —Ç–∏–∫–∞—Ö): 103156348.36 +- 57497.36 (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –æ—à–∏–±–∫–∞ —Å—Ä–µ–¥–Ω–µ–≥–æ)
–°—Ä–µ–¥–Ω–µ–∫–≤–∞–¥—Ä–∞—Ç–∏—á–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ: 572091.54
–ü–æ–≥—Ä–µ—à–Ω–æ—Å—Ç—å –∏–∑–º–µ—Ä–µ–Ω–∏–π: 0.06%

–° –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π —Ñ–ª–∞–≥–∞–º–∏ [-O1]:
–°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (–≤ —Ç–∏–∫–∞—Ö): 52518429.99 +- 32035.32 (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –æ—à–∏–±–∫–∞ —Å—Ä–µ–¥–Ω–µ–≥–æ)
–°—Ä–µ–¥–Ω–µ–∫–≤–∞–¥—Ä–∞—Ç–∏—á–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ: 318747.36
–ü–æ–≥—Ä–µ—à–Ω–æ—Å—Ç—å –∏–∑–º–µ—Ä–µ–Ω–∏–π: 0.06%

–° –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π —Ñ–ª–∞–≥–∞–º–∏ [-O2]:
–°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (–≤ —Ç–∏–∫–∞—Ö): 4768276.84 +- 11837.69 (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –æ—à–∏–±–∫–∞ —Å—Ä–µ–¥–Ω–µ–≥–æ)
–°—Ä–µ–¥–Ω–µ–∫–≤–∞–¥—Ä–∞—Ç–∏—á–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ: 116587.71
–ü–æ–≥—Ä–µ—à–Ω–æ—Å—Ç—å –∏–∑–º–µ—Ä–µ–Ω–∏–π: 0.25%

–° –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π —Ñ–ª–∞–≥–∞–º–∏ [-O3]:
–°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (–≤ —Ç–∏–∫–∞—Ö): 4718171.6 +- 1852.19 (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –æ—à–∏–±–∫–∞ —Å—Ä–µ–¥–Ω–µ–≥–æ)
–°—Ä–µ–¥–Ω–µ–∫–≤–∞–¥—Ä–∞—Ç–∏—á–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ: 18429.03
–ü–æ–≥—Ä–µ—à–Ω–æ—Å—Ç—å –∏–∑–º–µ—Ä–µ–Ω–∏–π: 0.04%

–° –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π —Ñ–ª–∞–≥–∞–º–∏ [-Ofast]:
–°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (–≤ —Ç–∏–∫–∞—Ö): 4733659.14 +- 14296.5 (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –æ—à–∏–±–∫–∞ —Å—Ä–µ–¥–Ω–µ–≥–æ)
–°—Ä–µ–¥–Ω–µ–∫–≤–∞–¥—Ä–∞—Ç–∏—á–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ: 141528.13
–ü–æ–≥—Ä–µ—à–Ω–æ—Å—Ç—å –∏–∑–º–µ—Ä–µ–Ω–∏–π: 0.3%
```

–ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ –∏—Ç–æ–≥–∏:

| –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è                   | –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã (—Ç–∏–∫–∏)   |
| :---------------------------- | :---------------------------: |
| –ë–µ–∑ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ [-O0]         | 103156348.36                  |
| –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ñ–ª–∞–≥–∞–º–∏ [-O1]     | 52518429.99                   |
| –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ñ–ª–∞–≥–∞–º–∏ [-O2]     | 4768276.84                    |
| –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ñ–ª–∞–≥–∞–º–∏ [-O3]     | 4718171.6                     |
| –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ñ–ª–∞–≥–∞–º–∏ [-Ofast]  | 4733659.14                    |

–ö–∞–∫ –≤–∏–¥–Ω–æ, –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ -O2, -O3 –∏ -Ofast –ø–æ—á—Ç–∏ –Ω–µ –æ—Ç–ª–∏—á–∞—é—Ç—Å—è, —Ç–∞–∫ –∫–∞–∫ –Ω–∞–∏–±–æ–ª—å—à–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –±—ã–ª–∞ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∞ –µ—â—ë –Ω–∞ —ç—Ç–∞–ø–µ -O2, –∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã–π –∫–æ–¥ —É–∂–µ –ø–æ—á—Ç–∏ –Ω–µ —É—Å–∫–æ—Ä—è—é—Ç.


<a name="ArrayOptimization"></a>

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å –ø–æ–º–æ—â—å—é –º–∞—Å—Å–∏–≤–æ–≤

–°—É—Ç—å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏: –∑–∞ –æ–¥–Ω—É –∏—Ç–µ—Ä–∞—Ü–∏—é —Ü–∏–∫–ª–∞ —Å—á–∏—Ç–∞—Ç—å –Ω–µ –æ–¥–Ω—É —Ç–æ—á–∫—É, –∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ (—è –≤—ã–±—Ä–∞–ª $ARR\_SIZE = 4$). –í —Ç–µ–æ—Ä–∏–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ç–æ—Ä –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞ –º–æ–∂–µ—Ç –∑–∞–º–µ—Ç–∏—Ç—å, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –º–∞—Å—Å–∏–≤ –∏–∑ $2^k$ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Ç–∏–ø–∞ float, –∏ –ø–æ–¥—Å—Ç–∞–≤–∏—Ç—å –≤ –∞—Å—Å–µ–º–±–ª–µ—Ä–Ω—ã–π –∫–æ–¥ –≤–º–µ—Å—Ç–æ –º–æ–∏—Ö –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –≤–µ–∫—Ç–æ—Ä–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è __m128.

–í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (—Å–ª–æ–∂–µ–Ω–∏–µ, —É–º–Ω–æ–∂–µ–Ω–∏–µ, –¥–µ–ª–µ–Ω–∏–µ) –ø—Ä–æ–∏–∑–≤–æ–¥—è—Ç—Å—è —Å –∫–∞–∂–¥—ã–º —ç–ª–µ–º–µ–Ω—Ç–æ–º –º–∞—Å—Å–∏–≤–∞ –ø–æ –æ—Ç–¥–µ–ª—å–Ω–æ—Å—Ç–∏. –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ü–∏–∫–ª –ø–æ–¥—Å—á—ë—Ç–∞ —Ç–æ—á–µ–∫ —Ç–æ–ª—å–∫–æ —Ç–æ–≥–¥–∞, –∫–æ–≥–¥–∞ –≤—Å–µ —Ç–æ—á–∫–∏ –∏–∑ –º–∞—Å—Å–∏–≤–∞ –æ–∫–∞–∂—É—Ç—Å—è –æ—Ç —Ü–µ–Ω—Ç—Ä–∞ –Ω–∞ –Ω—É–∂–Ω–æ–º —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–∏.

```cpp
for (unsigned int y = 0; y < data->window_width; ++y)
{
    float yf = (float) y / data->window_width * data->zoom + data->y_shift;
    float y0[ARR_SIZE] = {yf, yf, yf, yf};

    for (unsigned int x = 0; x < data->window_height; x += ARR_SIZE)
    {
        float xf = (float) x;
        float x0[ARR_SIZE] = {xf, xf+1, xf+2, xf+3};
        ArrDivConst(x0, x0, ARR_SIZE, (float) data->window_height);
        ArrMulConst(x0, x0, ARR_SIZE, data->zoom);
        ArrAddConst(x0, x0, ARR_SIZE, data->x_shift);

        float x1[ARR_SIZE]; memcpy(x1, x0, ARR_SIZE*sizeof(float));
        float y1[ARR_SIZE]; memcpy(y1, y0, ARR_SIZE*sizeof(float));

        int iters[ARR_SIZE] = {};
        for (int i = 0; i < MAX_DOT_TRIES; ++i)
        {
            float x1_quad[ARR_SIZE]; ArrMulArr(x1_quad, x1,    x1,    ARR_SIZE);
            float y1_quad[ARR_SIZE]; ArrMulArr(y1_quad, y1,    y1,    ARR_SIZE);
            float x1_y1  [ARR_SIZE]; ArrMulArr(x1_y1,   x1,    y1,    ARR_SIZE);

            float x1q_plus_y1q[ARR_SIZE]; ArrAddArr(x1q_plus_y1q, x1_quad, y1_quad, ARR_SIZE);
            float x1_sub_x2   [ARR_SIZE]; ArrSubArr(x1_sub_x2,    x1_quad, y1_quad, ARR_SIZE);
            float dx1_y1      [ARR_SIZE]; ArrAddArr(dx1_y1,       x1_y1,   x1_y1,   ARR_SIZE);

            int cmp_quads[ARR_SIZE]; ArrLtConst(cmp_quads, x1q_plus_y1q, ARR_SIZE, MAX_DISTANCE_QUAD);
            int cmp_mask = ArrGetMask(cmp_quads, ARR_SIZE);
            if (!cmp_mask)
                break;

            ArrAndConst(cmp_quads, cmp_quads, ARR_SIZE, 1);
            ArrAddArrInt(iters, iters, cmp_quads, ARR_SIZE);

            ArrAddArr(x1, x1_sub_x2, x0, ARR_SIZE);

            ArrAddArr(y1, dx1_y1, y0, ARR_SIZE);
        }
    }
}
```

–û–¥–Ω–∞–∫–æ –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ —Ç–µ—Å—Ç–æ–≤ –±—ã–ª–æ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–æ, —á—Ç–æ gcc –Ω–µ –∑–∞–º–µ—Ç–∏–ª –º–æ–∏—Ö –Ω–∞–º—ë–∫–æ–≤ –∏ —Å–∫–æ—Ä–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã –ø—Ä–æ–≥—Ä–∞–º–º—ã –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–ø–∞–ª–∞:

```
–° –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π –Ω–∞ –º–∞—Å—Å–∏–≤–µ [gcc, -O3]:
–°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (–≤ —Ç–∏–∫–∞—Ö): 22812340.27 +- 13907.29 (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –æ—à–∏–±–∫–∞ —Å—Ä–µ–¥–Ω–µ–≥–æ)
–°—Ä–µ–¥–Ω–µ–∫–≤–∞–¥—Ä–∞—Ç–∏—á–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ: 137675.14
–ü–æ–≥—Ä–µ—à–Ω–æ—Å—Ç—å –∏–∑–º–µ—Ä–µ–Ω–∏–π: 0.06%
```

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ —è —Ä–µ—à–∏–ª –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å clang, –∏ –≤–æ—Ç –æ–Ω —É–∂–µ –¥–∞–ª —Å—É—â–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –ø—Ä–∏—Ä–æ—Å—Ç —Å–∫–æ—Ä–æ—Å—Ç–∏:

```
–° –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π –Ω–∞ –º–∞—Å—Å–∏–≤–µ [clang, -O3]:
–°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (–≤ —Ç–∏–∫–∞—Ö): 1178212.95 +- 807.67 (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –æ—à–∏–±–∫–∞ —Å—Ä–µ–¥–Ω–µ–≥–æ)
–°—Ä–µ–¥–Ω–µ–∫–≤–∞–¥—Ä–∞—Ç–∏—á–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ: 7954.61
–ü–æ–≥—Ä–µ—à–Ω–æ—Å—Ç—å –∏–∑–º–µ—Ä–µ–Ω–∏–π: 0.07%
```

–ö–∞–∫ –∏ –æ–∂–∏–¥–∞–ª–æ—Å—å, —Å–∫–æ—Ä–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã –ø—Ä–æ–≥—Ä–∞–º–º—ã —É–≤–µ–ª–∏—á–∏–ª–∞—Å—å –ø—Ä–∏–º–µ—Ä–Ω–æ –≤ $n$ —Ä–∞–∑ –∑–∞ —Å—á—ë—Ç —É–º–µ–Ω—å—à–µ–Ω–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∏—Ç–µ—Ä–∞—Ü–∏–π

–ü–æ–ø—Ä–æ–±—É–µ–º –≤–º–µ—Å—Ç–æ —Ñ–ª–∞–≥–∞ -O3 –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å -O0 –∏ -O1:

```
–° –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π –Ω–∞ –º–∞—Å—Å–∏–≤–µ [gcc, -O0]:
–°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (–≤ —Ç–∏–∫–∞—Ö): 450074202.83 +- 307739.71 (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –æ—à–∏–±–∫–∞ —Å—Ä–µ–¥–Ω–µ–≥–æ)
–°—Ä–µ–¥–Ω–µ–∫–≤–∞–¥—Ä–∞—Ç–∏—á–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ: 3046467.7
–ü–æ–≥—Ä–µ—à–Ω–æ—Å—Ç—å –∏–∑–º–µ—Ä–µ–Ω–∏–π: 0.06999999999999999%

–° –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π –Ω–∞ –º–∞—Å—Å–∏–≤–µ [gcc, -O1]:
–°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (–≤ —Ç–∏–∫–∞—Ö): 100490231.8 +- 150989.16 (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –æ—à–∏–±–∫–∞ —Å—Ä–µ–¥–Ω–µ–≥–æ)
–°—Ä–µ–¥–Ω–µ–∫–≤–∞–¥—Ä–∞—Ç–∏—á–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ: 1502323.2
–ü–æ–≥—Ä–µ—à–Ω–æ—Å—Ç—å –∏–∑–º–µ—Ä–µ–Ω–∏–π: 0.15%

–° –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π –Ω–∞ –º–∞—Å—Å–∏–≤–µ [clang, -O0]:
–°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (–≤ —Ç–∏–∫–∞—Ö): 369012897.45 +- 570349.4 (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –æ—à–∏–±–∫–∞ —Å—Ä–µ–¥–Ω–µ–≥–æ)
–°—Ä–µ–¥–Ω–µ–∫–≤–∞–¥—Ä–∞—Ç–∏—á–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ: 5674904.84
–ü–æ–≥—Ä–µ—à–Ω–æ—Å—Ç—å –∏–∑–º–µ—Ä–µ–Ω–∏–π: 0.15%

–° –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π –Ω–∞ –º–∞—Å—Å–∏–≤–µ [clang, -O1]:
–°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (–≤ —Ç–∏–∫–∞—Ö): 111950949.94 +- 137602.19 (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –æ—à–∏–±–∫–∞ —Å—Ä–µ–¥–Ω–µ–≥–æ)
–°—Ä–µ–¥–Ω–µ–∫–≤–∞–¥—Ä–∞—Ç–∏—á–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ: 1376021.91
–ü–æ–≥—Ä–µ—à–Ω–æ—Å—Ç—å –∏–∑–º–µ—Ä–µ–Ω–∏–π: 0.12%
```

–ö–∞–∫ –º–æ–∂–Ω–æ –∑–∞–º–µ—Ç–∏—Ç—å, —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —Ö—É–∂–µ, –≤–µ–¥—å –æ–ø—Ç–∏–º–∏–∑–∞—Ç–æ—Ä –Ω–µ –ø—Ä–∏–º–µ–Ω–∏–ª –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∏ –º–Ω–æ–≥–∏–µ —Ç–æ—á–∫–∏ —Å—á–∏—Ç–∞—é—Ç—Å—è –±–æ–ª—å—à–µ–µ —á–∏—Å–ª–æ —Ä–∞–∑, —á–µ–º –Ω—É–∂–Ω–æ.

–ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ –∏—Ç–æ–≥–∏:

| –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è           | –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã (—Ç–∏–∫–∏)   |
| :-------------------: | :---------------------------: |
| –ú–∞—Å—Å–∏–≤—ã [gcc, -O0]    | 450074202.83                  |
| –ú–∞—Å—Å–∏–≤—ã [gcc, -O1]    | 100490231.8                   |
| –ú–∞—Å—Å–∏–≤—ã [gcc, -O3]    | 22812340.27                   |
| –ú–∞—Å—Å–∏–≤—ã [clang, -O0]  | 369012897.45                  |
| –ú–∞—Å—Å–∏–≤—ã [clang, -O1]  | 111950949.94                  |
| –ú–∞—Å—Å–∏–≤—ã [clang, -O3]  | 1178212.95                    |


<a name="AVXOptimization">

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –ø–æ–º–æ—â–∏ intrinsics (AVX)
–ü–æ—Å–ª–µ–¥–Ω–∏–º —à–∞–≥–æ–º –≤ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π —Å—Ç–∞–ª–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ intrinsic-—Ñ—É–Ω–∫—Ü–∏–π –∏ –≤–µ–∫—Ç–æ—Ä–Ω—ã—Ö —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö: __m128 –∏ __m256. –Ø –±—ã —Å —Ä–∞–¥–æ—Å—Ç—å—é –ø–æ–ø—Ä–æ–±–æ–≤–∞–ª –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å __m512, –æ–¥–Ω–∞–∫–æ –≤ —Ö–æ–¥–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –±—ã–ª–æ –≤—ã—è–≤–ª–µ–Ω–æ, —á—Ç–æ, —Ö–æ—Ç—è —Ä–∞–Ω—å—à–µ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä—ã Intel Core 13-–≥–æ –ø–æ–∫–æ–ª–µ–Ω–∏—è –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–ª–∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ AVX512, –Ω–æ, –∫ —Å–æ–∂–∞–ª–µ–Ω–∏—é –∏–ª–∏ –∫ —Å—á–∞—Å—Ç—å—é, Intel –æ—Ç–∫–ª—é—á–∏–ª –ø–æ–¥–¥–µ—Ä–∂–∫—É –¥–ª—è –Ω–æ–≤—ã—Ö –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç–µ–ª–µ–π –º–∏–∫—Ä–æ–∞—Ö—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã Raptor lake (13-–µ –ø–æ–∫–æ–ª–µ–Ω–∏–µ Intel Core).

–ö–æ–¥ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º __m128:

```cpp
const int INTR_SIZE_BYTES   = 4;
__m128  max_dist_quad       = _mm_set1_ps(MAX_DISTANCE_QUAD);
__m128i ones                = _mm_set1_epi32(1);
__m128  x_add               = _mm_set_ps(3.f, 2.f, 1.f, 0.f);

for (unsigned int y = 0; y < data->window_width; ++y)
{
    float yf = (float) y / data->window_width * data->zoom + data->y_shift;
    __m128 y0 = _mm_set1_ps(yf);

    for (unsigned int x = 0; x < data->window_height; x += INTR_SIZE_BYTES)
    {
        float xf = (float) x;
        __m128  x0 = _mm_add_ps(_mm_set1_ps(xf), x_add);
                x0 = _mm_div_ps(x0, _mm_set1_ps((float) data->window_height));
                x0 = _mm_mul_ps(x0, _mm_set1_ps(data->zoom));
                x0 = _mm_add_ps(x0, _mm_set1_ps(data->x_shift));

        __m128 x1 = x0;
        __m128 y1 = y0;

        __m128i iters = _mm_setzero_si128();
        for (int i = 0; i < MAX_DOT_TRIES; ++i)
        {
            __m128 x1_quad = _mm_mul_ps(x1, x1);
            __m128 y1_quad = _mm_mul_ps(y1, y1);
            __m128 x1_y1   = _mm_mul_ps(x1, y1);

            __m128 x1q_plus_y1q = _mm_add_ps(x1_quad, y1_quad);
            __m128 x1_sub_x2    = _mm_sub_ps(x1_quad, y1_quad);
            __m128 dx1_y1       = _mm_add_ps(x1_y1,   x1_y1  );

            __m128 cmp_quads = _mm_cmp_ps(x1q_plus_y1q, max_dist_quad, _CMP_LT_OQ);
            int cmp_mask = _mm_movemask_ps(cmp_quads);
            if (!cmp_mask)
                break;

            iters = _mm_add_epi32(iters, _mm_and_si128(_mm_castps_si128(cmp_quads), ones));

            x1 = _mm_add_ps(x1_sub_x2, x0);
            y1 = _mm_add_ps(dx1_y1,    y0);
        }
    }
}
```

–†–µ–∑—É–ª—å—Ç–∞—Ç –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:

```
–° –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º intrinsic-—Ñ—É–Ω–∫—Ü–∏–π (mm128):
–°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (–≤ —Ç–∏–∫–∞—Ö): 1179743.88 +- 1002.87 (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –æ—à–∏–±–∫–∞ —Å—Ä–µ–¥–Ω–µ–≥–æ)
–°—Ä–µ–¥–Ω–µ–∫–≤–∞–¥—Ä–∞—Ç–∏—á–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ: 9927.91
–ü–æ–≥—Ä–µ—à–Ω–æ—Å—Ç—å –∏–∑–º–µ—Ä–µ–Ω–∏–π: 0.09%

–° –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º intrinsic-—Ñ—É–Ω–∫—Ü–∏–π (mm256):
–°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (–≤ —Ç–∏–∫–∞—Ö): 595553.65 +- 2754.2 (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –æ—à–∏–±–∫–∞ —Å—Ä–µ–¥–Ω–µ–≥–æ)
–°—Ä–µ–¥–Ω–µ–∫–≤–∞–¥—Ä–∞—Ç–∏—á–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ: 26985.49
–ü–æ–≥—Ä–µ—à–Ω–æ—Å—Ç—å –∏–∑–º–µ—Ä–µ–Ω–∏–π: 0.46%
```

–ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ –∏—Ç–æ–≥–∏:

| –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è           | –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã (—Ç–∏–∫–∏)   |
| :-------------------- | :---------------------------: |
| Intrinsics [mm128]    | 1179743.88                    |
| Intrinsics [mm256]    | 595553.65                     |

–ö–∞–∫ –∏ –æ–∂–∏–¥–∞–ª–æ—Å—å, –∫–æ–¥ –Ω–∞ __m128 —Å—Ä–∞–±–æ—Ç–∞–ª –ø—Ä–∏–º–µ—Ä–Ω–æ –∑–∞ —Ç–∞–∫–æ–µ –∂–µ –≤—Ä–µ–º—è, —á—Ç–æ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –Ω–∞ –º–∞—Å—Å–∏–≤–µ, —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —á–µ—Ä–µ–∑ clang. –≠—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ –ø–æ—Ç–æ–º—É, —á—Ç–æ clang –ø—Ä–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —É–∂–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª intrinsics, —á—Ç–æ –º–æ–∂–Ω–æ —É–≤–∏–¥–µ—Ç—å –≤ –ø–æ–ª—É—á–∏–≤—à–µ–º—Å—è –∞—Å—Å–µ–º–±–ª–µ—Ä–Ω–æ–º –∫–æ–¥–µ. –ê –∫–æ–¥ –Ω–∞ __m256 —Ä–∞–±–æ—Ç–∞–µ—Ç –µ—â—ë –≤ –¥–≤–∞ —Ä–∞–∑–∞ –±—ã—Å—Ç—Ä–µ–µ.


<a name="Results"></a>

## üìà –ò—Ç–æ–≥–∏
–¢–∞–±–ª–∏—Ü–∞ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤:

| –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è               | –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã (—Ç–∏–∫–∏)   |
| :------------------------ | :---------------------------: |
| –ë–µ–∑ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ [-O0]     | 103156348.36                  |
| –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ñ–ª–∞–≥–∞–º–∏ [-O3] | 4718171.6                     |
| –ú–∞—Å—Å–∏–≤—ã [gcc, -O3]        | 22788394.95                   |
| –ú–∞—Å—Å–∏–≤—ã [clang, -O3]      | 1178212.95                    |
| Intrinsics [mm128]        | 1179743.88                    |
| Intrinsics [mm256]        | 595553.65                     |

–£–¥–∞–ª–æ—Å—å —É–≤–µ–ª–∏—á–∏—Ç—å —Å–∫–æ—Ä–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã –ø—Ä–æ–≥—Ä–∞–º–º—ã –ø–æ—á—Ç–∏ –≤ 8 —Ä–∞–∑, –±–ª–∞–≥–æ–¥–∞—Ä—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º AVX.

–¢–∞–∫–∂–µ –≤ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Å –≤–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π –º–∞—Å—Å–∏–≤–æ–≤ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä clang –ø–æ–∫–∞–∑–∞–ª —Å–µ–±—è –ª—É—á—à–µ, —á–µ–º gcc, —Ö–æ—Ç—è, –≤–µ—Ä–æ—è—Ç–Ω–æ, —è –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø–æ–¥—Å–∫–∞–∑–∞–ª gcc, –∫–∞–∫ –µ–º—É –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–æ–≤–æ–¥–∏—Ç—å –≤–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏—é.

–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Ñ–ª–∞–≥–∞–º–∏ –¥–∞–ª–∏ –º–Ω–µ –æ–¥–Ω–æ–∑–Ω–∞—á–Ω–æ –ø–æ–Ω—è—Ç—å, —á—Ç–æ —ç—Ç–æ –æ—á–µ–Ω—å –≤–∞–∂–Ω–∞—è –≤–µ—â—å, –≤–µ–¥—å –±–µ–∑ –Ω–µ—ë –∫–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Ä–∞–∑—ã –º–µ–¥–ª–µ–Ω–Ω–µ–µ.
